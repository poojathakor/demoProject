{% comment %}
    Renders a product card using "Grid" style
    Accepts:
    - max_height: {Number} Maximum height of the product's image (required)
    - product: {Object} Product Liquid object (required)
    - show_vendor: {Boolean} Show the product's vendor depending on the section setting (optional)

    Usage:
    {% include 'product-card-grid', max_height: max_height, product: product, show_vendor: section.settings.show_vendor %}
{% endcomment %}

<div class="grid-view-item{% unless product.available %} grid-view-item--sold-out{% endunless %} product-card">
  <a class="grid-view-item__link grid-view-item__image-container" href="{{ product.url | within: collection }}">
    <span class="visually-hidden">{{ product.title }}</span>
    {% capture img_id %}ProductCardImage-{{ section.id }}-{{ product.id }}{% endcapture %}
    {% capture wrapper_id %}ProductCardImageWrapper-{{ section.id }}-{{ product.id }}{% endcapture %}
    {%- assign preview_image = product.featured_media.preview_image -%}
    {%- assign img_url = preview_image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}

    {% unless preview_image == blank %}
      {% include 'image-style', image: preview_image, height: max_height, wrapper_id: wrapper_id, img_id: img_id %}
    {% endunless %}

    <div class="product-card__image-with-placeholder-wrapper" data-image-loading-animation>
      <div class="product-card__image-wrapper">
        <div id="{{ wrapper_id }}" class="grid-view-item__image-wrapper product-card__image-wrapper js">
          <div style="padding-top:{% unless preview_image == blank %}{{ 1 | divided_by: preview_image.aspect_ratio | times: 100 }}%{% else %}100%{% endunless %};">
            <img id="{{ img_id }}"
              class="grid-view-item__image lazyload"
              alt="{{ preview_image.alt }}"
              data-src="{{ img_url }}"
              data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
              data-aspectratio="{{ preview_image.aspect_ratio }}"
              data-sizes="auto"
              data-image>
          </div>
          
          <div class="brand-logo">
            <svg width="92" height="92" viewBox="0 0 92 92" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M37.7348 1.30919C13.0298 5.898 -3.27959 29.6482 1.30922 54.3533C5.89804 79.0583 29.6482 95.3677 54.3533 90.7789C79.0584 86.1901 95.3677 62.4399 90.7789 37.7348C86.1901 13.0297 62.4399 -3.27963 37.7348 1.30919ZM64.0377 29.3177C64.0377 29.3177 65.2163 35.6632 57.182 38.7787C57.182 38.7787 56.3487 39.084 55.9025 39.2192C55.8278 39.2396 55.7775 39.321 55.7916 39.3969C55.8057 39.4728 55.8744 39.5255 55.959 39.5229C56.4302 39.4877 57.3113 39.4746 57.3113 39.4746C65.9284 39.4971 67.1071 45.8426 67.1071 45.8426L67.6829 48.9426C68.6194 53.9848 67.4833 58.6856 64.3952 62.5316C61.4457 66.2079 56.9086 68.7719 51.6133 69.7554C46.3813 70.7273 41.2451 69.96 37.1532 67.5916C32.8421 65.1004 30.0684 61.1258 29.1354 56.1026L28.5596 53.0026C28.5596 53.0026 27.2599 46.0054 17.4114 46.6828C17.3344 46.6906 17.2582 46.6328 17.2441 46.5569C17.23 46.4809 17.2751 46.4071 17.355 46.3792C26.7887 43.4685 25.4902 36.4777 25.4902 36.4777L24.7863 32.6881C24.5724 31.5367 24.8479 30.4122 25.4597 29.5131C26.0727 28.6205 27.0296 27.9584 28.1811 27.7445C30.4776 27.318 32.6906 28.8376 33.1171 31.1342L33.821 34.9237C33.821 34.9237 34.9997 41.2692 26.9654 44.3847C26.5619 44.5381 26.1383 44.6888 25.6859 44.8252C25.6112 44.8456 25.5608 44.927 25.5749 45.0029C25.589 45.0788 25.6577 45.1315 25.7423 45.1289C26.2135 45.0937 26.663 45.0822 27.0946 45.0806C35.7118 45.1031 36.8904 51.4486 36.8904 51.4486L37.3252 53.7894C38.3546 59.3315 43.6048 62.5449 50.0516 61.3475C56.5869 60.1336 60.2533 55.349 59.2087 49.7247L58.7621 47.3206C58.6075 46.6294 56.931 40.4222 47.6258 41.0642C47.5487 41.0719 47.4725 41.0141 47.4584 40.9382C47.4443 40.8623 47.4895 40.7884 47.5693 40.7605C56.3654 38.0468 55.8381 31.7897 55.7209 30.9476L54.9994 27.0631C54.5717 24.7603 56.0735 22.5571 58.3701 22.1306L58.389 22.127C60.6919 21.6993 62.8985 23.2201 63.3251 25.5167L64.0314 29.3189L64.0377 29.3177Z" fill="#FFE800"/>
            </svg>
          </div>
        </div>
        <div class="secondary-image">
          {%- assign image = product.images[1] | img_url: '50x50' -%}
          {%- assign img_url =  product.images[1] | img_url: '50x50' | replace: '_50x50.', '_{width}x.' -%}
          <img
            class="lazyload"
            src="{{ product.images[1] | img_url: '100x' }}"
            data-src="{{ img_url }}"
            data-widths="[360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
            data-aspectratio="{{ product.images[1].aspect_ratio }}"
            data-sizes="auto"
            alt="{{ product.images[1].alt | escape }}"
            style="width:100%;"
            />
        </div>
        <div class="sliding-logo">
          <svg width="1331" height="160" viewBox="0 0 1331 160" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1267.37 110.486C1260.78 115.758 1253.51 117.366 1238.29 117.366H1230.78C1227.14 117.366 1226.23 117.13 1222.59 117.815C1224.42 113 1224.64 111.858 1225.78 106.128L1239.63 41.4837H1250.31C1260.31 41.4837 1266.67 42.6265 1271.22 44.6988C1279.84 49.0491 1284.17 57.7649 1284.17 71.0595C1284.18 86.6473 1277.14 102.456 1267.37 110.486ZM634.936 69.9167H614.033C611.531 69.9167 610.851 69.9167 608.803 70.8385C609.483 68.3091 609.483 67.6234 609.483 65.5664V43.3198C609.483 40.8057 609.483 40.3409 608.803 37.8268C610.844 38.741 611.531 38.741 614.033 38.741H632.427C646.286 38.741 653.329 43.556 654.017 53.186C654.697 64.4084 648.334 69.9167 634.936 69.9167ZM361.998 73.1241H344.503C342.002 73.1241 341.548 73.1241 339.047 73.8098C339.727 71.2804 339.954 71.0595 339.954 68.5377V45.1559C339.954 43.0989 339.954 42.4056 339.047 39.8914C341.541 40.8133 341.994 40.8133 344.503 40.8133H361.091C374.497 40.8133 381.079 46.3064 381.079 57.0868C381.079 68.0882 375.631 73.1241 361.998 73.1241ZM1318.95 24.9817C1310.09 13.287 1298.5 6.87967 1282.14 4.35789C1275.54 3.67221 1264.64 3.19985 1243.96 3.19985H1201.46L1169.42 155.063V3.19985H1123.28H1123.07H1076.92L1061.92 75.4174L1059.65 84.5826L1057.37 93.9841C1054.42 104.3 1053.51 107.515 1051.22 111.637C1047.14 119.202 1040.1 122.867 1030.33 122.867C1017.6 122.867 1011.13 115.347 1011.69 103.157C1011.88 99.0353 1012.37 97.1916 1014.2 88.0187L1014.88 85.0398L1032.16 3.19985H985.809L967.174 91.4547C964.317 106.098 964.007 106.814 963.992 115.987H901.495C898.994 115.987 898.548 115.987 896.047 116.901C896.946 114.387 896.946 114.151 896.946 111.637V3.19985H850.795H850.591H733.563L702.239 151.597C701.483 148.861 700.757 144.984 700.138 139.826C700.138 139.826 698.83 122.752 697.41 115.994C695.823 108.429 693.767 102.7 691.047 98.3344C686.739 92.148 681.502 88.0263 675.139 86.1902L674.912 85.2759C690.367 79.0896 699.223 65.1017 699.223 46.9997C699.223 32.0975 691.273 18.1096 677.86 10.5519C668.776 5.27975 658.778 3.20747 640.83 3.20747H563.786H563.574H438.135L425.5 63.0979C425.704 60.919 425.855 58.702 425.855 56.3935C425.855 38.0477 417.897 21.7818 404.03 12.6165C393.813 5.50069 381.994 3.19985 357.229 3.19985H293.818H293.606H247.463L232.47 75.4174L230.188 84.5826L227.913 93.9841C224.966 104.3 224.051 107.515 221.777 111.637C217.688 119.202 210.645 122.867 200.874 122.867C188.155 122.867 181.679 115.347 182.246 103.157C182.435 99.0353 182.926 97.1916 184.747 88.0187L185.427 85.0398L202.703 3.19985H156.34L137.712 91.4547C136.05 99.9648 135.248 103.766 134.871 107.248C134.379 91.4852 128.908 81.6342 116.787 73.1165C109.282 67.6158 100.206 63.9512 83.1653 59.3724C69.9858 55.7002 69.2981 55.464 68.8447 55.464C68.6104 55.464 68.6255 55.464 67.9379 55.2355C59.9803 52.7213 57.4865 52.2566 55.4385 51.1061C52.7104 49.9633 51.1234 47.9063 50.8967 44.9121C50.67 38.2687 55.8844 35.0536 66.8043 35.0536C77.9434 35.0536 85.2057 40.5619 85.4324 49.4986H129.059C128.833 18.102 106.335 0 68.1721 0C31.8001 0 6.12876 19.0239 6.12876 46.992C6.12876 60.0581 9.99042 70.1452 17.4946 77.0173C24.772 83.6684 33.6137 87.7901 58.8392 95.1269C84.2913 103.157 88.7575 104.536 89.0674 110.722C89.5208 119.69 81.7975 124.931 68.3913 124.246C53.844 123.56 47.4809 118.059 46.5741 104.528H0C0.226711 116.215 3.40067 126.074 9.08357 134.554C19.9884 150.141 41.3446 159.314 67.0235 159.314C87.2461 159.314 103.154 155.193 114.965 146.934C125.409 139.59 132.755 127.75 134.531 115.332C134.531 115.827 134.523 116.345 134.523 116.901C134.523 141.433 154.519 157.021 189.289 159.543C192.916 159.771 196.325 159.992 199.74 159.992C231.329 159.992 252.904 148.77 264.489 126.31C268.819 117.823 271.54 110.265 275.175 91.2337L293.606 4.1979V156.107H339.961V113.465C339.961 110.936 339.961 110.486 339.054 107.964C341.548 108.65 342.002 108.65 344.511 108.65H368.822C388.81 108.65 401.317 104.757 411.081 94.8983C416.492 89.4357 420.383 83.0284 422.824 75.7374L405.874 156.107H533.792L541.75 117.373H471.771C465.635 117.373 464.947 117.137 459.725 117.823C461.312 113.008 461.547 111.865 462.68 106.136L465.174 94.8983H538.341L545.846 59.38H484.044C477.908 59.38 477.001 59.38 471.779 60.0581C473.366 55.7002 473.593 54.5574 474.726 49.75L476.767 40.3486H555.851L563.589 4.19028V156.107H609.491V106.822C609.491 104.757 609.491 104.071 608.811 101.549C610.851 102.464 611.539 102.464 614.04 102.464H629.26C637.437 102.464 643.573 104.536 647.435 108.429C651.75 113.465 653.125 117.823 654.939 133.19C654.939 133.19 655.982 149.501 658.347 156.107H701.302H704.468H747.656L759.241 101.092H820.355L828.079 65.1017H778.096C772.406 65.1017 771.28 65.1017 766.058 65.7873C767.872 60.9799 768.098 59.5933 769.239 53.8641L771.733 41.9485H842.853L850.599 4.22837V156.107H964.204V121.137C966.403 143.216 986.036 157.173 1018.76 159.55C1022.39 159.779 1025.79 160 1029.21 160C1060.79 160 1082.37 148.778 1093.97 126.318C1098.29 117.831 1101.01 110.273 1104.65 91.2414L1123.08 4.20551V156.107H1169.21H1169.43H1237.38C1256.7 156.107 1271.46 154.042 1281.23 149.913C1296.69 143.498 1309.63 131.346 1318.5 116.444C1325.77 103.606 1331 84.575 1331 70.5947C1330.99 49.2777 1328.04 37.1259 1318.95 24.9817Z" fill="#FFE800"/>
          </svg>
          <svg width="1331" height="160" viewBox="0 0 1331 160" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1267.37 110.486C1260.78 115.758 1253.51 117.366 1238.29 117.366H1230.78C1227.14 117.366 1226.23 117.13 1222.59 117.815C1224.42 113 1224.64 111.858 1225.78 106.128L1239.63 41.4837H1250.31C1260.31 41.4837 1266.67 42.6265 1271.22 44.6988C1279.84 49.0491 1284.17 57.7649 1284.17 71.0595C1284.18 86.6473 1277.14 102.456 1267.37 110.486ZM634.936 69.9167H614.033C611.531 69.9167 610.851 69.9167 608.803 70.8385C609.483 68.3091 609.483 67.6234 609.483 65.5664V43.3198C609.483 40.8057 609.483 40.3409 608.803 37.8268C610.844 38.741 611.531 38.741 614.033 38.741H632.427C646.286 38.741 653.329 43.556 654.017 53.186C654.697 64.4084 648.334 69.9167 634.936 69.9167ZM361.998 73.1241H344.503C342.002 73.1241 341.548 73.1241 339.047 73.8098C339.727 71.2804 339.954 71.0595 339.954 68.5377V45.1559C339.954 43.0989 339.954 42.4056 339.047 39.8914C341.541 40.8133 341.994 40.8133 344.503 40.8133H361.091C374.497 40.8133 381.079 46.3064 381.079 57.0868C381.079 68.0882 375.631 73.1241 361.998 73.1241ZM1318.95 24.9817C1310.09 13.287 1298.5 6.87967 1282.14 4.35789C1275.54 3.67221 1264.64 3.19985 1243.96 3.19985H1201.46L1169.42 155.063V3.19985H1123.28H1123.07H1076.92L1061.92 75.4174L1059.65 84.5826L1057.37 93.9841C1054.42 104.3 1053.51 107.515 1051.22 111.637C1047.14 119.202 1040.1 122.867 1030.33 122.867C1017.6 122.867 1011.13 115.347 1011.69 103.157C1011.88 99.0353 1012.37 97.1916 1014.2 88.0187L1014.88 85.0398L1032.16 3.19985H985.809L967.174 91.4547C964.317 106.098 964.007 106.814 963.992 115.987H901.495C898.994 115.987 898.548 115.987 896.047 116.901C896.946 114.387 896.946 114.151 896.946 111.637V3.19985H850.795H850.591H733.563L702.239 151.597C701.483 148.861 700.757 144.984 700.138 139.826C700.138 139.826 698.83 122.752 697.41 115.994C695.823 108.429 693.767 102.7 691.047 98.3344C686.739 92.148 681.502 88.0263 675.139 86.1902L674.912 85.2759C690.367 79.0896 699.223 65.1017 699.223 46.9997C699.223 32.0975 691.273 18.1096 677.86 10.5519C668.776 5.27975 658.778 3.20747 640.83 3.20747H563.786H563.574H438.135L425.5 63.0979C425.704 60.919 425.855 58.702 425.855 56.3935C425.855 38.0477 417.897 21.7818 404.03 12.6165C393.813 5.50069 381.994 3.19985 357.229 3.19985H293.818H293.606H247.463L232.47 75.4174L230.188 84.5826L227.913 93.9841C224.966 104.3 224.051 107.515 221.777 111.637C217.688 119.202 210.645 122.867 200.874 122.867C188.155 122.867 181.679 115.347 182.246 103.157C182.435 99.0353 182.926 97.1916 184.747 88.0187L185.427 85.0398L202.703 3.19985H156.34L137.712 91.4547C136.05 99.9648 135.248 103.766 134.871 107.248C134.379 91.4852 128.908 81.6342 116.787 73.1165C109.282 67.6158 100.206 63.9512 83.1653 59.3724C69.9858 55.7002 69.2981 55.464 68.8447 55.464C68.6104 55.464 68.6255 55.464 67.9379 55.2355C59.9803 52.7213 57.4865 52.2566 55.4385 51.1061C52.7104 49.9633 51.1234 47.9063 50.8967 44.9121C50.67 38.2687 55.8844 35.0536 66.8043 35.0536C77.9434 35.0536 85.2057 40.5619 85.4324 49.4986H129.059C128.833 18.102 106.335 0 68.1721 0C31.8001 0 6.12876 19.0239 6.12876 46.992C6.12876 60.0581 9.99042 70.1452 17.4946 77.0173C24.772 83.6684 33.6137 87.7901 58.8392 95.1269C84.2913 103.157 88.7575 104.536 89.0674 110.722C89.5208 119.69 81.7975 124.931 68.3913 124.246C53.844 123.56 47.4809 118.059 46.5741 104.528H0C0.226711 116.215 3.40067 126.074 9.08357 134.554C19.9884 150.141 41.3446 159.314 67.0235 159.314C87.2461 159.314 103.154 155.193 114.965 146.934C125.409 139.59 132.755 127.75 134.531 115.332C134.531 115.827 134.523 116.345 134.523 116.901C134.523 141.433 154.519 157.021 189.289 159.543C192.916 159.771 196.325 159.992 199.74 159.992C231.329 159.992 252.904 148.77 264.489 126.31C268.819 117.823 271.54 110.265 275.175 91.2337L293.606 4.1979V156.107H339.961V113.465C339.961 110.936 339.961 110.486 339.054 107.964C341.548 108.65 342.002 108.65 344.511 108.65H368.822C388.81 108.65 401.317 104.757 411.081 94.8983C416.492 89.4357 420.383 83.0284 422.824 75.7374L405.874 156.107H533.792L541.75 117.373H471.771C465.635 117.373 464.947 117.137 459.725 117.823C461.312 113.008 461.547 111.865 462.68 106.136L465.174 94.8983H538.341L545.846 59.38H484.044C477.908 59.38 477.001 59.38 471.779 60.0581C473.366 55.7002 473.593 54.5574 474.726 49.75L476.767 40.3486H555.851L563.589 4.19028V156.107H609.491V106.822C609.491 104.757 609.491 104.071 608.811 101.549C610.851 102.464 611.539 102.464 614.04 102.464H629.26C637.437 102.464 643.573 104.536 647.435 108.429C651.75 113.465 653.125 117.823 654.939 133.19C654.939 133.19 655.982 149.501 658.347 156.107H701.302H704.468H747.656L759.241 101.092H820.355L828.079 65.1017H778.096C772.406 65.1017 771.28 65.1017 766.058 65.7873C767.872 60.9799 768.098 59.5933 769.239 53.8641L771.733 41.9485H842.853L850.599 4.22837V156.107H964.204V121.137C966.403 143.216 986.036 157.173 1018.76 159.55C1022.39 159.779 1025.79 160 1029.21 160C1060.79 160 1082.37 148.778 1093.97 126.318C1098.29 117.831 1101.01 110.273 1104.65 91.2414L1123.08 4.20551V156.107H1169.21H1169.43H1237.38C1256.7 156.107 1271.46 154.042 1281.23 149.913C1296.69 143.498 1309.63 131.346 1318.5 116.444C1325.77 103.606 1331 84.575 1331 70.5947C1330.99 49.2777 1328.04 37.1259 1318.95 24.9817Z" fill="#FFE800"/>
          </svg>
        </div>
      </div>
    </div>

    <noscript>
      {% capture image_size %}{{ max_height }}x{{ max_height }}{% endcapture %}
      <img class="grid-view-item__image" src="{{ preview_image | img_url: image_size, scale: 2 }}" alt="{{ preview_image.alt }}" style="max-width: {{ max_height | times: preview_image.aspect_ratio }}px;">
    </noscript>
    <div class="title-price--wrapper">
      <div class="h4 grid-view-item__title product-card__title" aria-hidden="true">{{ product.title }}</div>
      {% include 'product-price-listing', product: product, show_vendor: show_vendor %}
    </div>
  </a>
</div>
